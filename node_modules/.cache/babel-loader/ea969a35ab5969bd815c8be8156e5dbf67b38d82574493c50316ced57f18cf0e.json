{"ast":null,"code":"var _jsxFileName = \"D:\\\\9raya_2\\\\TEST\\\\fullstack-jwt-chapter_1\\\\frontend\\\\src\\\\components\\\\AdminReclamation.js\";\nimport React, { Component } from 'react';\nimport { request } from '../helpers/axios_helper';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class AdminReclamationContent extends Component {\n  constructor(props) {\n    super(props);\n    this.handleEtatChange = (index, selectedEtat) => {\n      // Clone the data array to avoid directly modifying the state\n      const newData = [...this.state.data];\n      // Update the etat property of the selected reclamation\n      newData[index].etat = selectedEtat;\n\n      // Update the state with the modified data\n      this.setState({\n        data: newData\n      });\n\n      // Send a request to update the etat value in the backend\n      // You need to implement the backend endpoint for updating the etat value\n      const {\n        numReclamation\n      } = newData[index];\n      request('PUT', `/UpdateReclamationEtat/${numReclamation}`, {\n        etat: selectedEtat\n      }).then(response => {\n        // Handle the response as needed\n      }).catch(error => {\n        // Handle error\n      });\n    };\n    this.state = {\n      data: []\n    };\n  }\n  componentDidMount() {\n    // Retrieve 'role' from local storage\n    const role = localStorage.getItem('role');\n\n    // Check if 'role' exists before making the request\n    if (!role) {\n      return;\n    }\n    request('GET', '/GetReclamation').then(response => {\n      this.setState({\n        data: response.data\n      });\n    }).catch(error => {\n      if (error.response && error.response.status === 401) {\n        // Handle unauthorized access\n      } else {\n        this.setState({\n          data: []\n        }); // Set an empty array or handle error appropriately\n      }\n    });\n  }\n\n  render() {\n    const role = localStorage.getItem('role');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-md-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: \"Reclamations\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 15\n            }, this), role === \"1\" && /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Num Reclamation\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 68,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"cin\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 69,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Num Facture\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 70,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Num Police\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 71,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Date facture\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 72,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"type\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 73,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Consommation\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 74,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Description\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 75,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Etat\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 76,\n                    columnNumber: 6\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Action\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 77,\n                    columnNumber: 6\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 67,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 66,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: this.state.data && this.state.data.map((reclamation, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"select\", {\n                      value: reclamation.etat,\n                      onChange: e => this.handleEtatChange(index, e.target.value),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"nonTraite\",\n                        children: \"Non trait\\xE9\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 90,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"enCours\",\n                        children: \"En cours\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 91,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"traite\",\n                        children: \"Trait\\xE9\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 92,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 86,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 85,\n                    columnNumber: 27\n                  }, this)\n                }, reclamation.numReclamation, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 83,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 80,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this), role !== \"1\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"You're not an admin. Stop!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","request","AdminReclamationContent","constructor","props","handleEtatChange","index","selectedEtat","newData","state","data","etat","setState","numReclamation","then","response","catch","error","componentDidMount","role","localStorage","getItem","status","render","map","reclamation","e","target","value"],"sources":["D:/9raya_2/TEST/fullstack-jwt-chapter_1/frontend/src/components/AdminReclamation.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { request } from '../helpers/axios_helper';\r\n\r\nexport default class AdminReclamationContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Retrieve 'role' from local storage\r\n    const role = localStorage.getItem('role');\r\n\r\n    // Check if 'role' exists before making the request\r\n    if (!role) {\r\n      return;\r\n    }\r\n\r\n    request('GET', '/GetReclamation')\r\n      .then((response) => {\r\n        this.setState({ data: response.data });\r\n      })\r\n      .catch((error) => {\r\n        if (error.response && error.response.status === 401) {\r\n          // Handle unauthorized access\r\n        } else {\r\n          this.setState({ data: [] }); // Set an empty array or handle error appropriately\r\n        }\r\n      });\r\n  }\r\n\r\n  handleEtatChange = (index, selectedEtat) => {\r\n    // Clone the data array to avoid directly modifying the state\r\n    const newData = [...this.state.data];\r\n    // Update the etat property of the selected reclamation\r\n    newData[index].etat = selectedEtat;\r\n\r\n    // Update the state with the modified data\r\n    this.setState({ data: newData });\r\n\r\n    // Send a request to update the etat value in the backend\r\n    // You need to implement the backend endpoint for updating the etat value\r\n    const { numReclamation } = newData[index];\r\n    request('PUT', `/UpdateReclamationEtat/${numReclamation}`, { etat: selectedEtat })\r\n      .then((response) => {\r\n        // Handle the response as needed\r\n      })\r\n      .catch((error) => {\r\n        // Handle error\r\n      });\r\n  };\r\n\r\n  render() {\r\n    const role = localStorage.getItem('role');\r\n\r\n    return (\r\n      <div className=\"row justify-content-md-center\">\r\n        <div className=\"col-12\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Reclamations</h5>\r\n              {role === \"1\" && (\r\n                <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                    <th>Num Reclamation</th>\r\n     <th>cin</th>\r\n     <th>Num Facture</th>\r\n     <th>Num Police</th>\r\n     <th>Date facture</th>\r\n     <th>type</th>\r\n     <th>Consommation</th>\r\n     <th>Description</th>\r\n     <th>Etat</th>\r\n     <th>Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {this.state.data &&\r\n                      this.state.data.map((reclamation, index) => (\r\n                        <tr key={reclamation.numReclamation}>\r\n                          {/* ... (other table cells) */}\r\n                          <td>\r\n                            <select\r\n                              value={reclamation.etat}\r\n                              onChange={(e) => this.handleEtatChange(index, e.target.value)}\r\n                            >\r\n                              <option value=\"nonTraite\">Non traité</option>\r\n                              <option value=\"enCours\">En cours</option>\r\n                              <option value=\"traite\">Trait&eacute;</option>\r\n                            </select>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n              {role !== \"1\" && <h1>You're not an admin. Stop!</h1>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}