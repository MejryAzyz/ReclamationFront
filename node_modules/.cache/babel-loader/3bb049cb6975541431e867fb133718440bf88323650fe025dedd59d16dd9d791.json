{"ast":null,"code":"var _jsxFileName = \"D:\\\\9raya_2\\\\TEST\\\\fullstack-jwt-chapter_1\\\\frontend\\\\src\\\\components\\\\AppContent.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Routes, Route, Navigate, useNavigate } from 'react-router-dom';\nimport { request, setAuthHeader, getAuthToken } from '../helpers/axios_helper';\nimport NavBar from '../Layout/NavBar';\nimport WelcomeContent from './WelcomeContent';\nimport LoginForm from './LoginForm';\nimport ReclamationContent from './Reclamation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst AppContent = () => {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(Boolean(getAuthToken()));\n  const navigate = useNavigate();\n  const login = () => {\n    navigate('/login');\n  };\n  const logout = () => {\n    setAuthHeader(null);\n    setIsAuthenticated(false);\n    navigate('/welcome');\n  };\n  const onLogin = (e, username, password) => {\n    e.preventDefault();\n    request(\"POST\", \"/login\", {\n      login: username,\n      password: password\n    }).then(response => {\n      setAuthHeader(response.data.token);\n      window.localStorage.setItem('cin', response.data.cin);\n      setIsAuthenticated(true);\n      navigate('/Relamation');\n    }).catch(error => {\n      setAuthHeader(null);\n      setIsAuthenticated(false);\n    });\n  };\n  const onRegister = (event, firstName, lastName, username, password, cin, tel, adresse) => {\n    event.preventDefault();\n    console.log(\"Registering with tel:\", tel);\n    request(\"POST\", \"/register\", {\n      firstName: firstName,\n      lastName: lastName,\n      login: username,\n      password: password,\n      cin: cin,\n      tel: tel,\n      adresse: adresse\n    }).then(response => {\n      setAuthHeader(response.data.token);\n      setIsAuthenticated(true);\n      navigate('/Relamation');\n    }).catch(error => {\n      setAuthHeader(null);\n      setIsAuthenticated(false);\n    });\n  };\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate('/welcome');\n    }\n  }, [isAuthenticated, navigate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {\n      login: login,\n      logout: logout,\n      isAuthenticated: isAuthenticated\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Routes, {\n      children: [/*#__PURE__*/_jsxDEV(Route, {\n        path: \"/welcome\",\n        element: /*#__PURE__*/_jsxDEV(WelcomeContent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 49\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/login\",\n        element: /*#__PURE__*/_jsxDEV(LoginForm, {\n          onLogin: onLogin,\n          onRegister: onRegister\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 47\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/Relamation\",\n        element: /*#__PURE__*/_jsxDEV(ReclamationContent, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 52\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/*\",\n        element: /*#__PURE__*/_jsxDEV(Navigate, {\n          to: \"/welcome\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 43\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n_s(AppContent, \"KGrJ4/G2UFhyK3mHmmOfj6AI7as=\", false, function () {\n  return [useNavigate];\n});\n_c = AppContent;\nexport default AppContent;\nvar _c;\n$RefreshReg$(_c, \"AppContent\");","map":{"version":3,"names":["React","useState","useEffect","Routes","Route","Navigate","useNavigate","request","setAuthHeader","getAuthToken","NavBar","WelcomeContent","LoginForm","ReclamationContent","AppContent","isAuthenticated","setIsAuthenticated","Boolean","navigate","login","logout","onLogin","e","username","password","preventDefault","then","response","data","token","window","localStorage","setItem","cin","catch","error","onRegister","event","firstName","lastName","tel","adresse","console","log"],"sources":["D:/9raya_2/TEST/fullstack-jwt-chapter_1/frontend/src/components/AppContent.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Routes, Route, Navigate, useNavigate } from 'react-router-dom';\nimport { request, setAuthHeader, getAuthToken } from '../helpers/axios_helper';\nimport NavBar from '../Layout/NavBar';\nimport WelcomeContent from './WelcomeContent';\nimport LoginForm from './LoginForm';\nimport ReclamationContent from './Reclamation';\n\nconst AppContent = () => {\n    const [isAuthenticated, setIsAuthenticated] = useState(Boolean(getAuthToken()));\n\n    const navigate = useNavigate();\n\n    const login = () => {\n        navigate('/login');\n    };\n\n    const logout = () => {\n        setAuthHeader(null);\n        setIsAuthenticated(false);\n        navigate('/welcome');\n    };\n\n    const onLogin = (e, username, password) => {\n        e.preventDefault();\n        request(\"POST\", \"/login\", { login: username, password: password })\n            .then((response) => {\n                setAuthHeader(response.data.token);\n                window.localStorage.setItem('cin', response.data.cin);\n                setIsAuthenticated(true);\n                navigate('/Relamation');\n            })\n            .catch((error) => {\n                setAuthHeader(null);\n                setIsAuthenticated(false);\n            });\n    };\n\n    const onRegister = (event, firstName, lastName, username, password, cin, tel, adresse) => {\n        event.preventDefault();\n        console.log(\"Registering with tel:\", tel);\n        request(\"POST\", \"/register\", {\n            firstName: firstName,\n            lastName: lastName,\n            login: username,\n            password: password,\n            cin: cin,\n            tel: tel,\n            adresse: adresse,\n        })\n            .then((response) => {\n                setAuthHeader(response.data.token);\n                setIsAuthenticated(true);\n                navigate('/Relamation');\n            })\n            .catch((error) => {\n                setAuthHeader(null);\n                setIsAuthenticated(false);\n            });\n    };\n\n    useEffect(() => {\n        if (!isAuthenticated) {\n            navigate('/welcome');\n        }\n    }, [isAuthenticated, navigate]);\n\n    return (\n        <>\n            <NavBar login={login} logout={logout} isAuthenticated={isAuthenticated} />\n            <Routes>\n                <Route path=\"/welcome\" element={<WelcomeContent />} />\n                <Route path=\"/login\" element={<LoginForm onLogin={onLogin} onRegister={onRegister} />} />\n                <Route path=\"/Relamation\" element={<ReclamationContent />} />\n                <Route path=\"/*\" element={<Navigate to=\"/welcome\" />} />\n            </Routes>\n        </>\n    );\n};\n\nexport default AppContent;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}