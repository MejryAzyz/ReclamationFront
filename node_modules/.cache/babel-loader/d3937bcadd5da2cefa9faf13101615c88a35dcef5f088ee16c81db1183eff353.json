{"ast":null,"code":"var _jsxFileName = \"D:\\\\9raya_2\\\\TEST\\\\fullstack-jwt-chapter_1\\\\frontend\\\\src\\\\components\\\\AdminUser.js\";\nimport React, { Component } from 'react';\nimport { request, setAuthHeader } from '../helpers/axios_helper';\nimport { Link, useParams } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class UsersContent extends Component {\n  constructor(props) {\n    super(props);\n    this.deleteUser = id => {\n      request('DELETE', `/User/${id}`).then(response => {\n        // Handle the response as needed\n        console.log(\"User deleted successfully:\", response.data);\n        // Optionally, you may want to fetch the updated user list after deletion\n        this.fetchUserList();\n      }).catch(error => {\n        if (error.response && error.response.status === 401) {\n          // Handle unauthorized access\n        } else {\n          console.error(\"Error deleting user:\", error);\n        }\n      });\n    };\n    this.UpdateRole = (id, event) => {\n      event.preventDefault(); // Prevent the default form submission behavior\n\n      request('PUT', `/UserRole/${id}`).then(response => {\n        console.log(\"updating user role:\", error);\n\n        // Handle the response as needed\n        // Optionally, you may want to fetch the updated user list after deletion\n      }).catch(error => {\n        if (error.response && error.response.status === 401) {\n          // Handle unauthorized access\n        } else {}\n      });\n    };\n    this.fetchUserList = () => {\n      request('GET', '/GetUser').then(response => {\n        this.setState({\n          data: response.data\n        });\n        console.log(\"User list fetched successfully:\", response.data);\n      }).catch(error => {\n        if (error.response && error.response.status === 401) {\n          // Handle unauthorized access\n        } else {\n          console.error(\"Error fetching user list:\", error);\n          this.setState({\n            data: []\n          });\n        }\n      });\n    };\n    this.state = {\n      data: []\n    };\n  }\n  componentDidMount() {\n    // Retrieve 'role' from local storage\n    const role = localStorage.getItem('role');\n    console.log(\"Role:\", role);\n\n    // Check if 'role' exists before making the request\n    if (!role) {\n      return;\n    }\n\n    // Fetch the user list\n    this.fetchUserList();\n  }\n  render() {\n    const role = localStorage.getItem('role');\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row justify-content-md-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"col-12\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card-body\",\n            children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n              className: \"card-title\",\n              children: \"Users\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 15\n            }, this), role === \"1\" && /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"User ID\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 92,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"First Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 93,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Last Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 94,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Login\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 95,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"CIN\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 96,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Telephone\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 97,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Address\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 98,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Role\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 99,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    children: \"Action\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 100,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 91,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: this.state.data && this.state.data.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 107,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.firstName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 108,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.lastName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 109,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.login\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 110,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.cin\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 111,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.tel\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 112,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.adresse\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 113,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: user.role\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-outline-danger mx-2\",\n                      onClick: () => this.deleteUser(user.id),\n                      children: \"Delete\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn-outline-danger mx-2\",\n                      onClick: event => this.UpdateRole(user.id, event),\n                      children: \"update Role\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 122,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 115,\n                    columnNumber: 27\n                  }, this)]\n                }, user.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 25\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 103,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 89,\n              columnNumber: 17\n            }, this), role !== \"1\" && /*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"You're not an admin. Stop!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 32\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this);\n  }\n}","map":{"version":3,"names":["React","Component","request","setAuthHeader","Link","useParams","UsersContent","constructor","props","deleteUser","id","then","response","console","log","data","fetchUserList","catch","error","status","UpdateRole","event","preventDefault","setState","state","componentDidMount","role","localStorage","getItem","render","map","user","firstName","lastName","login","cin","tel","adresse"],"sources":["D:/9raya_2/TEST/fullstack-jwt-chapter_1/frontend/src/components/AdminUser.js"],"sourcesContent":["import React, { Component } from 'react';\r\nimport { request, setAuthHeader } from '../helpers/axios_helper';\r\nimport { Link, useParams } from 'react-router-dom';\r\n\r\nexport default class UsersContent extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      data: [],\r\n    };\r\n  }\r\n\r\n  deleteUser = (id) => {\r\n    request('DELETE', `/User/${id}`)\r\n      .then((response) => {\r\n        // Handle the response as needed\r\n        console.log(\"User deleted successfully:\", response.data);\r\n        // Optionally, you may want to fetch the updated user list after deletion\r\n        this.fetchUserList();\r\n      })\r\n      .catch((error) => {\r\n        if (error.response && error.response.status === 401) {\r\n          // Handle unauthorized access\r\n        } else {\r\n          console.error(\"Error deleting user:\", error);\r\n        }\r\n      });\r\n  };\r\n  UpdateRole = (id,event) => {\r\n    event.preventDefault();  // Prevent the default form submission behavior\r\n\r\n    request('PUT', `/UserRole/${id}`)\r\n      .then((response) => {\r\n        console.log(\"updating user role:\", error);\r\n\r\n        // Handle the response as needed\r\n        // Optionally, you may want to fetch the updated user list after deletion\r\n       \r\n      })\r\n      .catch((error) => {\r\n        if (error.response && error.response.status === 401) {\r\n          // Handle unauthorized access\r\n        } else {\r\n        }\r\n      });\r\n  };\r\n\r\n  fetchUserList = () => {\r\n    request('GET', '/GetUser')\r\n      .then((response) => {\r\n        this.setState({ data: response.data });\r\n        console.log(\"User list fetched successfully:\", response.data);\r\n      })\r\n      .catch((error) => {\r\n        if (error.response && error.response.status === 401) {\r\n          // Handle unauthorized access\r\n        } else {\r\n          console.error(\"Error fetching user list:\", error);\r\n          this.setState({ data: [] });\r\n        }\r\n      });\r\n  };\r\n\r\n  componentDidMount() {\r\n    // Retrieve 'role' from local storage\r\n    const role = localStorage.getItem('role');\r\n\r\n    console.log(\"Role:\", role);\r\n\r\n    // Check if 'role' exists before making the request\r\n    if (!role) {\r\n      return;\r\n    }\r\n\r\n    // Fetch the user list\r\n    this.fetchUserList();\r\n  }\r\n\r\n  render() {\r\n    const role = localStorage.getItem('role');\r\n\r\n    return (\r\n      <div className=\"row justify-content-md-center\">\r\n        <div className=\"col-12\">\r\n          <div className=\"card\">\r\n            <div className=\"card-body\">\r\n              <h5 className=\"card-title\">Users</h5>\r\n              {role === \"1\" && (\r\n                <table className=\"table\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>User ID</th>\r\n                      <th>First Name</th>\r\n                      <th>Last Name</th>\r\n                      <th>Login</th>\r\n                      <th>CIN</th>\r\n                      <th>Telephone</th>\r\n                      <th>Address</th>\r\n                      <th>Role</th>\r\n                      <th>Action</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {this.state.data &&\r\n                      this.state.data.map((user) => (\r\n                        <tr key={user.id}>\r\n                          <td>{user.id}</td>\r\n                          <td>{user.firstName}</td>\r\n                          <td>{user.lastName}</td>\r\n                          <td>{user.login}</td>\r\n                          <td>{user.cin}</td>\r\n                          <td>{user.tel}</td>\r\n                          <td>{user.adresse}</td>\r\n                          <td>{user.role}</td>\r\n                          <td>\r\n                            <button\r\n                              className=\"btn btn-outline-danger mx-2\"\r\n                              onClick={() => this.deleteUser(user.id)}\r\n                            >\r\n                              Delete\r\n                            </button>\r\n                            <button\r\n                              className=\"btn btn-outline-danger mx-2\"\r\n                              onClick={(event) => this.UpdateRole(user.id,event)}\r\n                            >\r\n                              update Role\r\n                            </button>\r\n                          </td>\r\n                        </tr>\r\n                      ))}\r\n                  </tbody>\r\n                </table>\r\n              )}\r\n              {role !== \"1\" && <h1>You're not an admin. Stop!</h1>}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}