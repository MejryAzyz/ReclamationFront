{"ast":null,"code":"var _jsxFileName = \"D:\\\\9raya_2\\\\TEST\\\\fullstack-jwt-chapter_1\\\\frontend\\\\src\\\\components\\\\AppContent.js\";\n// AppContent.js\nimport * as React from 'react';\nimport { request, setAuthHeader, getAuthToken } from '../helpers/axios_helper';\nimport { Redirect, Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport LoginForm from './LoginForm';\nimport WelcomeContent from './WelcomeContent';\nimport FacturesContent from './Factures';\nimport ReclamationContent from './Reclamation';\nimport NavBar from '../Layout/NavBar';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default class AppContent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.login = () => {\n      // Update the URL to \"/login\" when logging in\n      this.props.history.push('/login');\n    };\n    this.logout = () => {\n      // Redirect to \"/welcome\" after logout\n      this.props.history.push('/welcome');\n      this.setState({\n        isAuthenticated: false\n      });\n      setAuthHeader(null);\n    };\n    this.onLogin = (e, username, password) => {\n      e.preventDefault();\n      request(\"POST\", \"/login\", {\n        login: username,\n        password: password\n      }).then(response => {\n        setAuthHeader(response.data.token);\n        window.localStorage.setItem('cin', response.data.cin);\n        // Redirect to \"/Factures\" after successful login\n        this.props.history.push('/Factures');\n        this.setState({\n          isAuthenticated: true\n        });\n      }).catch(error => {\n        setAuthHeader(null);\n        // Redirect to \"/welcome\" on login failure\n        this.props.history.push('/welcome');\n        this.setState({\n          isAuthenticated: false\n        });\n      });\n    };\n    this.onRegister = (event, firstName, lastName, username, password, cin, tel, adresse) => {\n      event.preventDefault();\n      request(\"POST\", \"/register\", {\n        firstName: firstName,\n        lastName: lastName,\n        login: username,\n        password: password,\n        cin: cin,\n        tel: tel,\n        adresse: adresse\n      }).then(response => {\n        setAuthHeader(response.data.token);\n        // Redirect to \"/Factures\" after successful registration\n        this.props.history.push('/Factures');\n        this.setState({\n          isAuthenticated: true\n        });\n      }).catch(error => {\n        setAuthHeader(null);\n        // Redirect to \"/welcome\" on registration failure\n        this.props.history.push('/welcome');\n        this.setState({\n          isAuthenticated: false\n        });\n      });\n    };\n    this.state = {\n      isAuthenticated: Boolean(getAuthToken())\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(Router, {\n      children: /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(NavBar, {\n          login: this.login,\n          logout: this.logout,\n          isAuthenticated: this.state.isAuthenticated\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Switch, {\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/Factures\",\n            component: FacturesContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/welcome\",\n            component: WelcomeContent\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            render: props => /*#__PURE__*/_jsxDEV(LoginForm, {\n              ...props,\n              onLogin: this.onLogin,\n              onRegister: this.onRegister\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), this.state.isAuthenticated && /*#__PURE__*/_jsxDEV(Redirect, {\n            from: \"/login\",\n            to: \"/welcome\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 56\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }, this);\n  }\n}","map":{"version":3,"names":["React","request","setAuthHeader","getAuthToken","Redirect","Route","BrowserRouter","Router","Switch","LoginForm","WelcomeContent","FacturesContent","ReclamationContent","NavBar","AppContent","Component","constructor","props","login","history","push","logout","setState","isAuthenticated","onLogin","e","username","password","preventDefault","then","response","data","token","window","localStorage","setItem","cin","catch","error","onRegister","event","firstName","lastName","tel","adresse","state","Boolean","render"],"sources":["D:/9raya_2/TEST/fullstack-jwt-chapter_1/frontend/src/components/AppContent.js"],"sourcesContent":["// AppContent.js\nimport * as React from 'react';\nimport { request, setAuthHeader, getAuthToken } from '../helpers/axios_helper';\nimport { Redirect, Route, BrowserRouter as Router, Switch } from 'react-router-dom';\nimport LoginForm from './LoginForm';\nimport WelcomeContent from './WelcomeContent';\nimport FacturesContent from './Factures';\nimport ReclamationContent from './Reclamation';\nimport NavBar from '../Layout/NavBar';\n\nexport default class AppContent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            isAuthenticated: Boolean(getAuthToken()),\n        };\n    }\n\n    login = () => {\n        // Update the URL to \"/login\" when logging in\n        this.props.history.push('/login');\n    };\n\n    logout = () => {\n        // Redirect to \"/welcome\" after logout\n        this.props.history.push('/welcome');\n        this.setState({ isAuthenticated: false });\n        setAuthHeader(null);\n    };\n\n    onLogin = (e, username, password) => {\n        e.preventDefault();\n        request(\"POST\", \"/login\", { login: username, password: password })\n            .then((response) => {\n                setAuthHeader(response.data.token);\n                window.localStorage.setItem('cin', response.data.cin);\n                // Redirect to \"/Factures\" after successful login\n                this.props.history.push('/Factures');\n                this.setState({ isAuthenticated: true });\n            })\n            .catch((error) => {\n                setAuthHeader(null);\n                // Redirect to \"/welcome\" on login failure\n                this.props.history.push('/welcome');\n                this.setState({ isAuthenticated: false });\n            });\n    };\n\n    onRegister = (event, firstName, lastName, username, password, cin, tel, adresse) => {\n        event.preventDefault();\n        request(\"POST\", \"/register\", {\n            firstName: firstName,\n            lastName: lastName,\n            login: username,\n            password: password,\n            cin: cin,\n            tel: tel,\n            adresse: adresse,\n        })\n            .then((response) => {\n                setAuthHeader(response.data.token);\n                // Redirect to \"/Factures\" after successful registration\n                this.props.history.push('/Factures');\n                this.setState({ isAuthenticated: true });\n            })\n            .catch((error) => {\n                setAuthHeader(null);\n                // Redirect to \"/welcome\" on registration failure\n                this.props.history.push('/welcome');\n                this.setState({ isAuthenticated: false });\n            });\n    };\n\n    render() {\n        return (\n            <Router>\n                <>\n                    <NavBar login={this.login} logout={this.logout} isAuthenticated={this.state.isAuthenticated} />\n                    <Switch>\n                        <Route path=\"/Factures\" component={FacturesContent} />\n                        <Route path=\"/welcome\" component={WelcomeContent} />\n                        <Route\n                            path=\"/login\"\n                            render={(props) => (\n                                <LoginForm {...props} onLogin={this.onLogin} onRegister={this.onRegister} />\n                            )}\n                        />\n                        {/* Redirect to /welcome if authenticated */}\n                        {this.state.isAuthenticated && <Redirect from=\"/login\" to=\"/welcome\" />}\n                        {/* Add more routes as needed */}\n                    </Switch>\n                </>\n            </Router>\n        );\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}